Bootstrap: docker
From: julia:0.6

%files
    containers/cyclops/runCYCLOPS.jl /runCYCLOPS.jl

%environment
    export JULIA_PKGDIR=/opt/julia/v0.6

%post
    curl -L https://github.com/ranafi/CYCLOPS/archive/refs/heads/master.tar.gz > master.tar.gz
    tar -xzf master.tar.gz -C /
    mv /CYCLOPS-master /CYCLOPS

    # Configure a directory to place Julia packages
    export JULIA_PKGDIR=/opt/julia

    julia -e 'using Base.Pkg; Base.Pkg.init()'
    julia -e 'using Base.Pkg; Base.Pkg.add("ArgParse")'
    julia -e 'using Base.Pkg; Base.Pkg.add("StatsBase")'
    julia -e 'using Base.Pkg; Base.Pkg.add("MultivariateStats")'
    julia -e 'using Base.Pkg; Base.Pkg.add("Distributions")'

    # Permissions
    chmod -R 645 /opt/julia
    chmod 645 /runCYCLOPS.jl

%runscript
    julia /runCYCLOPS.jl "$@"

%help
    CYCLOPS (Cyclic Ordering by Periodic Structure) is a tool designed to reconstruct the temporal ordering of high dimensional that is generated by a common periodic process.

    See https://github.com/ranafi/CYCLOPS
